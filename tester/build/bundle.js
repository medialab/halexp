(()=>{"use strict";var e,n,t=0,r=document.getElementById("headers"),o=(document.getElementById("results"),document.getElementById("loader")),u=function(e){return e.trim()},c=function(){!function(){e=[];var t=document.getElementById("instances").value.split("\n").map(u).filter((function(e){return e})).map((function(e){return e.replace(/^(https?:\/\/)?/,"//").replace(/\/?$/,"/")})),r=document.getElementById("min_year").value.split("\n").map(u).filter((function(e){return e})).map((function(e){return parseInt(e)})),o=document.getElementById("thresholds").value.split("\n").map(u).filter((function(e){return e})).map((function(e){return parseFloat(e)})),c=[];document.querySelectorAll('#metrics input[type="checkbox"]').forEach((function(e){e.checked&&c.push(e.value)})),t.forEach((function(n){return r.forEach((function(t){return o.forEach((function(r){return c.forEach((function(o){return e.push({name:[n.replace(/^.*\/([^\/]+)\/$/,"$1"),t,r,o].join(" | "),instance:n,min_year:t,threshold:r,metric:o})}))}))}))})),n=parseInt(document.getElementById("nb_results").value),console.log(e,n)}();for(var t=["Config"],o=0;o<n;o++)t.push("#&nbsp;"+(o+1));r.innerHTML=t.map((function(e){return"<th>"+e+"</th>"})).join("");for(var c=[],a=0;a<e.length;a++){var i=[];i.push(e[a].name);for(var l=0;l<n;l++)i.push("");c.push(i.map((function(e){return"<td>"+e+"</td>"})).join(""))}values.innerHTML=c.map((function(e,n){return'<tr id="config-'+n+'">'+e+"</tr>"})).join("")};document.getElementById("submit").addEventListener("click",(function(){c(),t=e.length,o.style.display="block";var n=document.querySelector('input[name="query_type"]:checked').value,r=document.getElementById("query").value;e.forEach((function(e,o){var u=e.instance+n+"/query?query="+r+"&score_threshold="+e.threshold+"&min_year="+e.min_year+"&rank_metric="+e.metric;console.log("Call #"+o+": "+u),fetch(u).then((function(e){return e.json()})).then((function(e){console.log("Result #"+o+": ",e),e.reponses.forEach((function(e,n){var t,r;e.name?(r=e.name,t="https://sciencespo.hal.science/search/index/?q=%2A&rows=30&sort=producedDate_tdate+desc&authIdPerson_i="+e["id-hal"]):(r=e.title_s,t=e.uri_s),document.querySelector("#config-"+o+" td:nth-child("+(n+2)+")").innerHTML='<a href="'+t+'" target="_blank">'+r+"</a>"})),t-=1}))}))})),c(),setInterval((function(){t||(o.style.display="none")}),100)})();
//# sourceMappingURL=bundle.js.map