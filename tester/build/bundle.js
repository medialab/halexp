(()=>{"use strict";var e,n,t,r,c={},u=0,o=document.getElementById("headers"),a=(document.getElementById("results"),document.getElementById("loader")),d=function(e){return e.trim()},i=function(e){return e.instance+n+"/query?query="+t+"&hits="+r+"&score_threshold="+e.threshold+"&min_year="+e.min_year+"&rank_metric="+e.metric},s=function(){!function(){e=[];var c=document.getElementById("instances").value.split("\n").map(d).filter((function(e){return e})).map((function(e){return e.replace(/^(https?:\/\/)?/,"//").replace(/\/?$/,"/")})),u=document.getElementById("min_year").value.split("\n").map(d).filter((function(e){return e})).map((function(e){return parseInt(e)})),o=document.getElementById("thresholds").value.split("\n").map(d).filter((function(e){return e})).map((function(e){return parseFloat(e)})),a=[];document.querySelectorAll('#metrics input[type="checkbox"]').forEach((function(e){e.checked&&a.push(e.value)})),c.forEach((function(n){return u.forEach((function(t){return o.forEach((function(r){return a.forEach((function(c){return e.push({name:[n.replace(/^.*\/([^\/]+)\/$/,"$1"),t,r,c].join(" | "),instance:n,min_year:t,threshold:r,metric:c})}))}))}))})),n=document.querySelector('input[name="query_type"]:checked').value,t=document.getElementById("query").value,r=parseInt(document.getElementById("nb_results").value),console.log(e,r)}();for(var c=["Config"],u=0;u<r;u++)c.push("#&nbsp;"+(u+1));o.innerHTML=c.map((function(e){return"<th>"+e+"</th>"})).join("");for(var a=[],s=0;s<e.length;s++){var l=[];l.push('<a class="query_link" href='+i(e[s])+' target="_blank">ðŸ”—</a> '+e[s].name);for(var m=0;m<r;m++)l.push("");a.push(l.map((function(e){return"<td>"+e+"</td>"})).join(""))}values.innerHTML=a.map((function(e,n){return'<tr id="config-'+n+'">'+e+"</tr>"})).join("")},l=function(){s(),u=e.length,a.style.display="block",e.forEach((function(e,n){var t=i(e);console.log("Call #"+n+": "+t),fetch(t).then((function(e){return e.json()})).then((function(e){console.log("Result #"+n+": ",e),e.reponses.forEach((function(e,t){var r,u;e.name?(u=e.name,r="https://sciencespo.hal.science/search/index/?q=%2A&rows=30&sort=producedDate_tdate+desc&authIdPerson_i="+e["id-hal"]):(u=e.title_s,r=e.uri_s),c[n+"#"+t]=e,document.querySelector("#config-"+n+" td:nth-child("+(t+2)+")").innerHTML='<a href="'+r+'" target="_blank">'+u+'</a>&nbsp;&nbsp;<span id="'+n+"#"+t+'" class="details">ï¼‹</span>'})),document.querySelectorAll("#config-"+n+" span").forEach((function(e){return e.addEventListener("mouseover",(function(){return m(e.id)}))})),u-=1}))}))},m=function(e){console.log(c[e])};document.getElementById("query_authors").addEventListener("change",s),document.getElementById("query_docs").addEventListener("change",s),document.getElementById("instances").addEventListener("keyup",s),document.getElementById("min_year").addEventListener("keyup",s),document.getElementById("thresholds").addEventListener("keyup",s),document.getElementById("metric_mean").addEventListener("change",s),document.getElementById("metric_median").addEventListener("change",s),document.getElementById("metric_log-mean").addEventListener("change",s),document.getElementById("query").addEventListener("keyup",s),document.getElementById("query").addEventListener("change",l),document.getElementById("nb_results").addEventListener("change",s),document.getElementById("submit").addEventListener("click",l),s(),setInterval((function(){u||(a.style.display="none")}),100)})();
//# sourceMappingURL=bundle.js.map