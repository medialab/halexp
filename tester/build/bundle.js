(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n,r,o,a,i={},u=0,c=document.getElementById("headers"),l=(document.getElementById("results"),document.getElementById("loader")),s=document.getElementById("tooltip"),d=function(e){return e.trim()},m=function(e){return e.instance+r+"/query?query="+o+"&hits="+a+"&score_threshold="+e.threshold+"&min_year="+e.min_year+"&rank_metric="+e.metric},p=function(){!function(){n=[];var e=document.getElementById("instances").value.split("\n").map(d).filter((function(e){return e})).map((function(e){return e.replace(/^(https?:\/\/)?/,"//").replace(/\/?$/,"/")})),t=document.getElementById("min_year").value.split("\n").map(d).filter((function(e){return e})).map((function(e){return parseInt(e)})),i=document.getElementById("thresholds").value.split("\n").map(d).filter((function(e){return e})).map((function(e){return parseFloat(e)})),u=[];document.querySelectorAll('#metrics input[type="checkbox"]').forEach((function(e){e.checked&&u.push(e.value)})),e.forEach((function(e){return t.forEach((function(t){return i.forEach((function(r){return u.forEach((function(o){return n.push({name:[e.replace(/^.*\/([^\/]+)\/$/,"$1"),t,r,o].join(" | "),instance:e,min_year:t,threshold:r,metric:o})}))}))}))})),r=document.querySelector('input[name="query_type"]:checked').value,o=document.getElementById("query").value,a=parseInt(document.getElementById("nb_results").value),console.log(n,a)}();for(var e=["Config"],t=0;t<a;t++)e.push("#&nbsp;"+(t+1));c.innerHTML=e.map((function(e){return"<th>"+e+"</th>"})).join("");for(var i=[],u=0;u<n.length;u++){var l=[];l.push('<a class="query_link" href='+m(n[u])+' target="_blank">ðŸ”—</a> '+n[u].name);for(var s=0;s<a;s++)l.push("");i.push(l.map((function(e){return"<td>"+e+"</td>"})).join(""))}values.innerHTML=i.map((function(e,t){return'<tr id="config-'+t+'">'+e+"</tr>"})).join("")},y=function(){p(),u=n.length,l.style.display="block",n.forEach((function(e,t){var n=m(e);console.log("Call #"+t+": "+n),fetch(n).then((function(e){return e.json()})).then((function(e){console.log("Result #"+t+": ",e),e.reponses.forEach((function(e,n){var r,o;e.name?(o=e.name,r="https://sciencespo.hal.science/search/index/?q=%2A&rows=30&sort=producedDate_tdate+desc&authIdPerson_i="+e["id-hal"]):(o=e.title_s,r=e.uri_s),i[t+"#"+n]=e,document.querySelector("#config-"+t+" td:nth-child("+(n+2)+")").innerHTML='<a href="'+r+'" target="_blank">'+o+'</a>&nbsp;&nbsp;<span id="'+t+"#"+n+'" class="details">ï¼‹</span>'})),document.querySelectorAll("#config-"+t+" span").forEach((function(e){e.addEventListener("mouseenter",(function(){return f(e.id)})),e.addEventListener("mouseleave",(function(){return h()}))})),u-=1}))}))},f=function(t){var n=i[t];s.innerHTML="authors"===r?"<p><b>Score:</b> "+n["aggregation score"]+"</p><p><b>Labo:</b> "+n.lab_id+"</p><p><b>Matches ("+n.phrases.length+"):</b> <ul><li>"+e(new Set(n.phrases)).join("</li><li>")+"</li></ul></p><p><b>Papers ("+n.papers.length+"):</b> <ul><li>"+e(new Set(n.papers.map((function(e){return e.title_s[0]})))).join("</li><li>")+"</li></ul></p>":"<p>"+n.citationFull_s+"</p><p><b>Subtitle:</b> "+n.subtitle_s[0]+"</p><p><b>Abstract:</b> "+n.abstract_s[0]+"</p><p><b>Keywords:</b> <ul><li>"+n.keyword_s.join("</li><li>")+"</li></ul></p><p><b>Year:</b> "+n.publicationDate_s+"</p>",s.style.display="block",console.log(i[t])},h=function(){s.innerHTML="",s.style.display="none"};document.getElementById("query_authors").addEventListener("change",p),document.getElementById("query_docs").addEventListener("change",p),document.getElementById("instances").addEventListener("keyup",p),document.getElementById("min_year").addEventListener("keyup",p),document.getElementById("thresholds").addEventListener("keyup",p),document.getElementById("metric_mean").addEventListener("change",p),document.getElementById("metric_median").addEventListener("change",p),document.getElementById("metric_log-mean").addEventListener("change",p),document.getElementById("query").addEventListener("keyup",p),document.getElementById("query").addEventListener("change",y),document.getElementById("nb_results").addEventListener("change",p),document.getElementById("submit").addEventListener("click",y),p(),setInterval((function(){u||(l.style.display="none")}),100)})();
//# sourceMappingURL=bundle.js.map